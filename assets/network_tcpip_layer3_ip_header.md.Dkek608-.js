import{_ as e,c as a,o as r,ae as n}from"./chunks/framework.BHrE6nLq.js";const d="/images/tcpip/layer3/ip_header.png",P=JSON.parse('{"title":"IP Packet Header","description":"","frontmatter":{},"headers":[],"relativePath":"network/tcpip/layer3/ip_header.md","filePath":"network/tcpip/layer3/ip_header.md"}'),i={name:"network/tcpip/layer3/ip_header.md"};function s(o,t,l,p,c,h){return r(),a("div",null,t[0]||(t[0]=[n('<h1 id="ip-packet-header" tabindex="-1">IP Packet Header <a class="header-anchor" href="#ip-packet-header" aria-label="Permalink to &quot;IP Packet Header&quot;">​</a></h1><blockquote><p>IP Packet Header 长度一般为20-60字节(Byte)。前20字节固定，后40字节可选长度不固定。</p></blockquote><h3 id="ip-packet-header-结构图" tabindex="-1"><strong>IP Packet Header 结构图</strong> <a class="header-anchor" href="#ip-packet-header-结构图" aria-label="Permalink to &quot;**IP Packet Header 结构图**&quot;">​</a></h3><hr><p><img src="'+d+`" alt="ip_header"></p><h3 id="ip-头部字段详细介绍" tabindex="-1"><strong>IP 头部字段详细介绍</strong> <a class="header-anchor" href="#ip-头部字段详细介绍" aria-label="Permalink to &quot;**IP 头部字段详细介绍**&quot;">​</a></h3><hr><table tabindex="0"><thead><tr><th>字段名称</th><th>长度 (位)</th><th>描述</th></tr></thead><tbody><tr><td>版本 (Version)</td><td>4</td><td>指定 IP 协议版本，IPv4 的值为 4。</td></tr><tr><td>头部长度 (IHL)</td><td>4</td><td>头部长度，以 32 位字为单位，最小值为 5 (20 字节)。</td></tr><tr><td>DS + ECN</td><td>8</td><td>区分服务字段和显式拥塞通知字段，常用于 QoS 和拥塞控制。</td></tr><tr><td>总长度 (Total Length)</td><td>16</td><td>IP 数据包的总长度，包括头部和数据部分，单位为字节。</td></tr><tr><td>标识 (Identification)</td><td>16</td><td>数据报的唯一标识符，用于分片和重组。</td></tr><tr><td>标志 (Flags)</td><td>3</td><td>标志位，包括分片控制标志 (DF、MF)。</td></tr><tr><td>片偏移 (Fragment Offset)</td><td>13</td><td>表示分片在原始数据报中的位置。</td></tr><tr><td>TTL (Time to Live)</td><td>8</td><td>数据包生存的最大跳数，每经过一跳减 1，降为 0 时丢弃。</td></tr><tr><td>协议 (Protocol)</td><td>8</td><td>指定上层协议，如 TCP (6)、UDP (17) 等。</td></tr><tr><td>头部校验和</td><td>16</td><td>检验 IP 头部数据的完整性。</td></tr><tr><td>源 IP 地址</td><td>32</td><td>数据包的源地址。</td></tr><tr><td>目的 IP 地址</td><td>32</td><td>数据包的目的地址。</td></tr><tr><td>选项 (可选)</td><td>可变</td><td>可选字段，提供特殊功能（如记录路由）。</td></tr></tbody></table><h3 id="ip-头部关键字段介绍" tabindex="-1">IP 头部关键字段介绍 <a class="header-anchor" href="#ip-头部关键字段介绍" aria-label="Permalink to &quot;IP 头部关键字段介绍&quot;">​</a></h3><hr><h4 id="_1-头部长度-ihl-internet-header-length" tabindex="-1"><strong>1. 头部长度 (IHL Internet Header Length)</strong> <a class="header-anchor" href="#_1-头部长度-ihl-internet-header-length" aria-label="Permalink to &quot;**1. 头部长度 (IHL Internet Header Length)**&quot;">​</a></h4><ul><li><p><strong>IHL (Internet Header Length，头部长度)</strong>：IHL 是一个 4 位字段，表示 IPv4 头部的长度，以 32 位字为单位（1 个单位 = 4 字节）。</p><ul><li><strong>取值范围：</strong> 5（最小长度 20 字节，无选项）到 15（最大长度 60 字节，包含选项）。</li><li><strong>限制说明：</strong> 由于最大长度为 60 字节，一些选项（如“记录路由”选项）难以使用。</li><li><strong>IPv6 差异：</strong> IPv6 没有 IHL 字段，因为 IPv6 头部固定为 40 字节。</li></ul></li><li><p><strong>IHL范围</strong>：5 - 15 个 <strong>32位字的数量</strong>，二进制表示 0101 - 1111。</p><ul><li>最小长度：5 * 32bit = 160bit = 20byte</li><li>最大长度：15 * 32bit = 480bit = 60byte</li></ul></li><li><p><strong>DS + ECN</strong>：早期该字段叫 <strong>TOS (Type of Service)</strong>，但由于<strong>未被广泛使用</strong>，后续被重新定义为 <strong>DS (Differentiated Services)</strong> 和 <strong>ECN (Explicit Congestion Notification)</strong> 两个部分，共 8 位。</p><ul><li><strong>DS (区分服务字段)</strong>：前 6 位称为 <strong>区分服务代码点 (DSCP, Differentiated Services Code Point)</strong>，用于定义不同的数据优先级或服务等级，以支持 QoS（服务质量）机制。</li><li><strong>ECN (显式拥塞通知)</strong>：后 2 位用于在拥塞情况下通知发送方。持续拥塞的路由器会设置该字段，常用于<strong>无损网络</strong>（如数据中心和音视频传输）来减少丢包。</li></ul></li><li><p>DS + ECN 摘自 wireshark</p></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Differentiated Services Field: 0x00 (DSCP: CS0, ECN: Not-ECT)</span></span>
<span class="line"><span>0000 00.. = Differentiated Services Codepoint: Default (0)</span></span>
<span class="line"><span>.... ..00 = Explicit Congestion Notification: Not ECN-Capable Transport (0)</span></span></code></pre></div><ul><li><p>标识字段：标识字段帮助标识由IPv4主机发送的数据报。为了避免将一个数据报分片和其他数据 报分片混淆,发送主机通常在每次(从它的一个IP地址)发送数据报时都将一个内部计数器 加1,并将该计数器值复制到IPv4标识字段。<strong>这个字段对实现分片很重要</strong>。</p></li><li><p>Flags: 0x00（摘自 wireshark）</p></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>- 0... .... = Reserved bit: Not set			// 保留位</span></span>
<span class="line"><span>.0.. .... = Don&#39;t fragment: Not set		    // 不分片</span></span>
<span class="line"><span>..0. .... = More fragments: Not set   	    // 被分片的包除最后一个均为1。</span></span></code></pre></div>`,15)]))}const u=e(i,[["render",s]]);export{P as __pageData,u as default};
