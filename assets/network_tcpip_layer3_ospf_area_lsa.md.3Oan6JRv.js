import{_ as a,c as i,o as l,ae as t}from"./chunks/framework.BHrE6nLq.js";const F=JSON.parse('{"title":"OSPF 区域与 LSA","description":"","frontmatter":{},"headers":[],"relativePath":"network/tcpip/layer3/ospf_area_lsa.md","filePath":"network/tcpip/layer3/ospf_area_lsa.md"}'),e={name:"network/tcpip/layer3/ospf_area_lsa.md"};function n(h,s,p,r,k,o){return l(),i("div",null,s[0]||(s[0]=[t(`<h1 id="ospf-区域与-lsa" tabindex="-1">OSPF 区域与 LSA <a class="header-anchor" href="#ospf-区域与-lsa" aria-label="Permalink to &quot;OSPF 区域与 LSA&quot;">​</a></h1><p>OSPF 采用 <strong>多区域（Multi-Area）</strong> 设计，提高扩展性和稳定性。区域划分减少 SPF 计算范围，优化路由表，并限制 LSA 泛洪范围。</p><h2 id="_1-ospf-区域类型" tabindex="-1">1. OSPF 区域类型 <a class="header-anchor" href="#_1-ospf-区域类型" aria-label="Permalink to &quot;1. OSPF 区域类型&quot;">​</a></h2><h3 id="_1-1-骨干区域-area-0" tabindex="-1">1.1 骨干区域（Area 0） <a class="header-anchor" href="#_1-1-骨干区域-area-0" aria-label="Permalink to &quot;1.1 骨干区域（Area 0）&quot;">​</a></h3><ul><li>OSPF 核心，所有区域需通过 Area 0 互通。</li><li>负责跨区域流量转发。</li></ul><h3 id="_1-2-普通区域" tabindex="-1">1.2 普通区域 <a class="header-anchor" href="#_1-2-普通区域" aria-label="Permalink to &quot;1.2 普通区域&quot;">​</a></h3><ul><li>运行标准 OSPF 机制，包含所有 LSA 类型。</li><li>适用于大多数 OSPF 部署。</li></ul><h3 id="_1-3-stub-area-末节区域" tabindex="-1">1.3 Stub Area（末节区域） <a class="header-anchor" href="#_1-3-stub-area-末节区域" aria-label="Permalink to &quot;1.3 Stub Area（末节区域）&quot;">​</a></h3><ul><li>屏蔽 LSA Type 5，仅接收默认路由。</li><li>适用于终端网络，减少 LSDB 规模。</li></ul><p><strong>CLI 配置示例：</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stub</span></span></code></pre></div><h3 id="_1-4-totally-stubby-area-完全末节区域" tabindex="-1">1.4 Totally Stubby Area（完全末节区域） <a class="header-anchor" href="#_1-4-totally-stubby-area-完全末节区域" aria-label="Permalink to &quot;1.4 Totally Stubby Area（完全末节区域）&quot;">​</a></h3><ul><li>屏蔽 LSA Type 3 &amp; 5，仅保留默认路由。</li></ul><p><strong>CLI 配置示例：</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-summary</span></span></code></pre></div><h3 id="_1-5-nssa-非完全末节区域" tabindex="-1">1.5 NSSA（非完全末节区域） <a class="header-anchor" href="#_1-5-nssa-非完全末节区域" aria-label="Permalink to &quot;1.5 NSSA（非完全末节区域）&quot;">​</a></h3><ul><li>允许引入外部路由（Type 7），ABR 转换为 Type 5 传播至骨干。</li></ul><p><strong>CLI 配置示例：</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nssa</span></span></code></pre></div><h3 id="_1-6-totally-nssa-完全非完全末节区域" tabindex="-1">1.6 Totally NSSA（完全非完全末节区域） <a class="header-anchor" href="#_1-6-totally-nssa-完全非完全末节区域" aria-label="Permalink to &quot;1.6 Totally NSSA（完全非完全末节区域）&quot;">​</a></h3><ul><li>在 NSSA 的基础上，仅保留默认路由（0.0.0.0/0）。</li></ul><p><strong>CLI 配置示例：</strong></p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nssa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no-summary</span></span></code></pre></div><h2 id="_2-ospf-lsa-概要" tabindex="-1">2. OSPF LSA 概要 <a class="header-anchor" href="#_2-ospf-lsa-概要" aria-label="Permalink to &quot;2. OSPF LSA 概要&quot;">​</a></h2><h3 id="_2-1-lsa-类型" tabindex="-1">2.1 LSA 类型 <a class="header-anchor" href="#_2-1-lsa-类型" aria-label="Permalink to &quot;2.1 LSA 类型&quot;">​</a></h3><ul><li><strong>Type 1（Router LSA）</strong>：所有 OSPF 路由器产生，描述本地链路。</li><li><strong>Type 2（Network LSA）</strong>：由 DR 产生，描述多路访问网络。</li><li><strong>Type 3（Summary LSA）</strong>：由 ABR 产生，跨区域传播汇总路由。</li><li><strong>Type 4（ASBR Summary LSA）</strong>：由 ABR 产生，标识 ASBR。</li><li><strong>Type 5（External LSA）</strong>：由 ASBR 产生，表示外部路由。</li><li><strong>Type 7（NSSA External LSA）</strong>：NSSA 内部 ASBR 产生，ABR 转换为 Type 5。</li></ul><h3 id="_2-2-过滤-lsa" tabindex="-1">2.2 过滤 LSA <a class="header-anchor" href="#_2-2-过滤-lsa" aria-label="Permalink to &quot;2.2 过滤 LSA&quot;">​</a></h3><ul><li><strong>过滤 Type 3 LSA</strong>（区域间路由）：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> area</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> filter-list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FILTER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.255</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> any</span></span></code></pre></div><ul><li><strong>过滤 Type 5 LSA</strong>（外部路由）：</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">router</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ospf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distribute-list</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> acl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FILTER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> out</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.10.10.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.255</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> any</span></span></code></pre></div><blockquote><p><strong>说明：</strong></p><ul><li><code>access-list 1</code> 仅阻止特定 Type 3 LSA（192.168.0.0/24），不影响其他路由。</li><li><code>access-list 2</code> 仅阻止特定 Type 5 LSA（10.10.10.0/24），不影响其他外部路由。</li><li><code>permit any</code> 确保其他 LSA 正常传播。</li></ul></blockquote><h2 id="_3-设计建议" tabindex="-1">3. 设计建议 <a class="header-anchor" href="#_3-设计建议" aria-label="Permalink to &quot;3. 设计建议&quot;">​</a></h2><ol><li><strong>减少区域数量</strong>，降低协议开销。</li><li><strong>确保骨干区域稳定</strong>，避免碎片化。</li><li><strong>终端区域使用 Stub 或 NSSA</strong>，减少 LSA 泛洪。</li><li><strong>避免虚链路</strong>，尽量直接连接骨干区域。</li><li><strong>合理路由汇总</strong>，减少 SPF 计算。</li></ol><h2 id="_4-结论" tabindex="-1">4. 结论 <a class="header-anchor" href="#_4-结论" aria-label="Permalink to &quot;4. 结论&quot;">​</a></h2><p>合理划分 OSPF 区域可提高协议扩展性和稳定性，Stub、NSSA 等特性能减少 LSA 泛洪，提高网络性能。骨干区域和 ABR 规划至关重要，优化路由计算与稳定性。</p>`,36)]))}const g=a(e,[["render",n]]);export{F as __pageData,g as default};
